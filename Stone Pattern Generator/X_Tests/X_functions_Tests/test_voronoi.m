clear;
close all;
clc;
addpath(genpath('../../'));
pos=[0,0;...
    0,1;...
    1,1;...
    1,0;...
    1,1.2;...
    2,1.2;...
    2,0;...
    0,3;...
    1,3;
    2,3];

stonesNodes={[1,2,3,4],[4,3,5,6,7],[2,8,9,5,3],[5,9,10,6]};

pos=[0,0;...
    0,2;...
    1,2;...
    1,1;...
    2,1;...
    2,0;...
    2,2];
stonesNodes={[1,2,3,4,5,6],[4,3,7,5]};



tresholdarea=0.5;
epsilon=0.1;
Lx_wall=2;
Ly_wall=2;
counter=[0,0,0,0];
row_vec=[1;1;2;2];
limitAngle=1.1*pi;

[postab2,stonesNodes2,pos_tab] = divide_in_voronoi_polygons( pos,stonesNodes,tresholdarea,epsilon,row_vec,Lx_wall,Ly_wall );
colors=create_colors(50);
draw_stones(pos_tab,2,2,3,colors,'LineWidth',0.5);
% 
disp('Shaking stones...');
[~,~,pos_tab_shaken] = shake(postab2,Lx_wall,Ly_wall,stonesNodes2,limitAngle);
figureref=draw_stones(pos_tab_shaken,2,2,3,colors,0.01,'Shaken Pattern');
